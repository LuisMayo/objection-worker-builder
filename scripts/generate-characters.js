// Generates animations from the godot project

const fs = require("fs");
const characters = fs.readdirSync(process.argv[2] + "/characters");
let output = `//// THIS FILE IS AUTOMATICALLY GENERATED USING generate-characters.js from the Objection Godot Source Code

import {Character} from './character-type'

export const characters: Character[] = [
`;

for (const character of characters) {
  try {
    const animations = fs.readdirSync(
      `${process.argv[2]}/characters/${character}`
    );
    output += `{
            name: "${character}",
            animations: [${animations
              .filter((animation) => !animation.includes("."))
              .map((animation) => `"${animation}"`)}]
        },
        `;
  } catch (e) {}
}

output += "]";

fs.writeFileSync("./src/characters.ts", output, {});
